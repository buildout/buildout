[tox]
skipsdist = true
skip_missing_interpreters = true
envlist =
    py27,py35,py36,py37,py38

[testenv]
skipinstall = true
commands =
    #pip install coverage
    # buildout's dev.py wants python to not have setuptools
    python dev.py
    {toxinidir}/bin/test -1 -vvv -c -t setup.txt
    #coverage combine
    #coverage report
# since we're removing setuptools we can't possibly reuse the virtualenv
recreate = true
# if the user has ccache installed, PATH may contain /usr/lib/ccache that has a
# gcc wrapper that fails to build anything when buildout's tests set HOME to a
# non-existent directory under /tmp
setenv =
    PATH=/usr/bin:/bin

[testenv:py27]
basepython = {toxinidir}/pythons/2.7/bin/python2

[testenv:py35]
basepython = {toxinidir}/pythons/3.5/bin/python3

[testenv:py36]
basepython = {toxinidir}/pythons/3.6/bin/python3

[testenv:py37]
basepython = {toxinidir}/pythons/3.7/bin/python3

[testenv:py38]
basepython = {toxinidir}/pythons/3.8/bin/python3
